(this["webpackJsonpmy-textbook"]=this["webpackJsonpmy-textbook"]||[]).push([[0],{179:function(e,t,n){e.exports=n(303)},184:function(e,t,n){},301:function(e,t,n){},303:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(184),n(23)),l=n(16),s=n(5),u=n(345),d=n(342),m=n(346),f=n(340),b=n(143),p=n.n(b),E=n(347),v=n(344),h=n(69),g=n(348),O=n(144),j=n.n(O),w=n(145),x=n.n(w),S=n(160),I=n(352),N=r.a.createContext(null),y=N,C=n(14),k=n(12),T=n(11),A=n.n(T),D=n(24),_=n(17),R=(n(186),n(190),"users"),V="notes",L="user-sets",F="set-notes",P="set-cards";_.initializeApp({apiKey:"AIzaSyDbYsgfn--OVImQkitEy5dzsoFgiqCdWvY",authDomain:"my-textbook-7d4db.firebaseapp.com",databaseURL:"https://my-textbook-7d4db.firebaseio.com",projectId:"my-textbook-7d4db",storageBucket:"my-textbook-7d4db.appspot.com",messagingSenderId:"685663840714",appId:"1:685663840714:web:a82aef34bd87490e7bc733"});var U=_.firestore(),z=_.auth(),W=function(){return z.signOut()},B=function(){return z.currentUser},G=function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.collection(V).doc(t).get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.collection(F).where("notes.".concat(t,".title"),">","").get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(D.a)(A.a.mark((function e(t,n){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.title,t){e.next=3;break}throw new Error("No userId!");case 3:if(null!=n&&""!==a.trim()){e.next=5;break}throw new Error("Insufficient data to add new set to database");case 5:return e.prev=5,e.next=8,U.runTransaction(function(){var e=Object(D.a)(A.a.mark((function e(n){var r,o,c,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.collection(L).doc(t),o=X(),e.next=4,n.set(r,{sets_count:_.firestore.FieldValue.increment(1),sets:Object(k.a)({},o,{title:a,created_on:_.firestore.FieldValue.serverTimestamp()})},{merge:!0});case 4:return c=U.collection(F).doc(o),e.next=7,n.set(c,{setTitle:a,userId:t,notes_count:0,max_notes:5,notes:{}});case 7:return i=U.collection(P).doc(o),e.next=10,n.set(i,{setTitle:a,userId:t,cards_count:0,last_modified:_.firestore.Timestamp.fromDate(new Date),cards:{}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),new Error("Transaction failed for addSet: ",e.t0.message);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(D.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&null!=n&&""!==t.trim()&&""!==n.trim()){e.next=2;break}throw new Error("Missing userId and/or setId, can't remove set");case 2:return e.prev=2,e.next=5,U.runTransaction(function(){var e=Object(D.a)(A.a.mark((function e(a){var r,o,c,i,l,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.collection(P).doc(n),e.next=3,a.delete(r);case 3:return e.next=5,U.collection(F).doc(n).get();case 5:if((o=e.sent).exists){e.next=8;break}throw new Error("Could not located the 'set-notes' document");case 8:if(null!=(c=o.data().notes||null)){e.next=11;break}throw new Error("Missing 'notes' object in the 'set-notes' document");case 11:return(i=Object.keys(c)).length!==o.data().notes_count&&console.error("firebase.js: removeSet() WARNING: the number of noteId's in the notes object does not match the notes_count field"),i.length>0&&(i.forEach(function(){var e=Object(D.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U.collection(V).doc(t),e.next=3,a.delete(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.debug("firebase.js removeSet() will remove ".concat(i.length," doc(s) from 'notes' collection"))),l=U.collection(F).doc(n),e.next=17,a.delete(l);case 17:return s=U.collection(L).doc(t),e.next=20,a.update(s,Object(k.a)({sets_count:_.firestore.FieldValue.increment(-1)},"sets.".concat(n),_.firestore.FieldValue.delete()));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Error("Transaction failed for removeSet: ".concat(e.t0.message));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(D.a)(A.a.mark((function e(t){var n,a,r,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:null,a=o.length>2?o[2]:void 0,r=a.title,null!=t){e.next=7;break}throw new Error("No userId!");case 7:if(null!=n){e.next=11;break}throw new Error("No setId!");case 11:if(null!=a&&""!==r.trim()){e.next=13;break}throw new Error("Insufficient data to create new Note");case 13:return e.prev=13,e.next=16,U.runTransaction(function(){var e=Object(D.a)(A.a.mark((function e(a){var o,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=U.collection(V).doc(),e.next=3,a.set(o,{setId:n,userId:t,title:r,content:"",created_on:_.firestore.FieldValue.serverTimestamp(),last_modified:_.firestore.FieldValue.serverTimestamp()});case 3:return c=U.collection(F).doc(n),e.next=6,a.set(c,{notes:Object(k.a)({},o.id,{title:r}),notes_count:_.firestore.FieldValue.increment(1)},{merge:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error("Transaction failed for addNote: ",e.t0.message);case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e,null,[[13,18]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(D.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=4;break}throw new Error("Missing noteId, cannot remove Note");case 4:if(null!=n){e.next=6;break}throw new Error("Missing setId, cannot remove Note");case 6:return e.prev=6,e.next=9,U.runTransaction(function(){var e=Object(D.a)(A.a.mark((function e(a){var r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.collection(V).doc(t),e.next=3,a.delete(r);case 3:return o=U.collection(F).doc(n),e.next=6,a.update(o,Object(k.a)({notes_count:_.firestore.FieldValue.increment(-1)},"notes.".concat(t),_.firestore.FieldValue.delete()));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),new Error("Transaction failed for removeNote: ",e.t0.message);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(D.a)(A.a.mark((function e(t,n,a){var r,o,c,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=4;break}throw new Error("Missing noteId, cannot update Note");case 4:if(null!=n){e.next=8;break}throw new Error("Missing setId, cannot update Note");case 8:if(null!=a){e.next=10;break}throw new Error("Missing noteData, cannot update Note");case 10:return r=a.title,o=a.content,c={},r&&o?c={title:r,content:o}:!r&&o?c={content:o}:r&&!o&&(c={title:r}),e.prev=13,e.next=16,U.runTransaction(function(){var e=Object(D.a)(A.a.mark((function e(n){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=U.collection(V).doc(t),i=_.firestore.Timestamp.now(),e.next=4,n.update(a,Object(C.a)(Object(C.a)({},c),{},{last_modified:i}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error("Transaction failed for saveNote: ",e.t0.message);case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,null,[[13,18]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(D.a)(A.a.mark((function e(t,n,a){var r,o,c,i,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.side_one,c=a.side_two,null!=t){e.next=5;break}throw new Error("No userId!");case 5:if(null!=n){e.next=9;break}throw new Error("No setId!");case 9:if(null!=a&&""!==o.trim()&&""!==c.trim()){e.next=11;break}throw new Error("Insufficient data to create new Card");case 11:return i=X(),l=U.collection(P).doc(n),e.next=15,l.update((r={},Object(k.a)(r,"cards.".concat(i),{side_one:o,side_two:c,created_on:_.firestore.FieldValue.serverTimestamp(),last_modified:_.firestore.FieldValue.serverTimestamp()}),Object(k.a)(r,"cards_count",_.firestore.FieldValue.increment(1)),Object(k.a)(r,"last_modified",_.firestore.FieldValue.serverTimestamp()),r));case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(D.a)(A.a.mark((function e(t,n){var a,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=4;break}throw new Error("Missing cardId, cannot remove Card");case 4:if(null!=n){e.next=6;break}throw new Error("Missing setId, cannot remove Card");case 6:return r=U.collection(P).doc(n),e.next=9,r.update((a={},Object(k.a)(a,"cards.".concat(t),_.firestore.FieldValue.delete()),Object(k.a)(a,"cards_count",_.firestore.FieldValue.increment(-1)),a));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},Z=Object.freeze({ANON:"ANON",USER_LOADING:"USER_LOADING",USER_READY:"USER_READY"}),ee=Object(a.createContext)({initiliazing:null,userSession:null}),te=Object(a.createContext)({loadingUser:null,userDb:null}),ne=Object(a.createContext)(Z.ANON),ae=function(e){var t=e.userSessionValue,n=e.userDbValue,a=e.userSessionStatusValue,o=e.children;return r.a.createElement(ee.Provider,{value:t},r.a.createElement(te.Provider,{value:n},r.a.createElement(ne.Provider,{value:a},o)))},re=function(){var e=Object(a.useContext)(ee);return{initializing:e.initializing,userSession:e.userSession}},oe=function(){var e=Object(a.useContext)(te);return{loadingUser:e.loadingUser,userDb:e.userDb}},ce=function(){return Object(a.useContext)(ne)},ie=function(){var e=Object(a.useState)(B),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(a.useState)(!n),d=Object(s.a)(u,2),m=d[0],f=d[1],b=Object(a.useState)(null),p=Object(s.a)(b,2),E=p[0],v=p[1];console.debug("useSession.js: useAuth, initializing = ".concat(m,", loadingUser = ").concat(E));var h=Object(a.useRef)(null),g=Object(a.useCallback)((function(e){if(e){r(e),f(!1),console.log("useSession.js: onChange, USER SESSION EXISTS (".concat(e.uid," LOGGED IN) initializing = false"));try{v(!0),console.debug("useSession.js: onChange, Attempting to load User. loadingUser = true"),h.current=(t=e.uid,n=function(e){if(e.empty)throw new Error("useSession.js: onChange, couldn't find authenticated user in the 'users' firestore db");l(e.data()),v(!1),console.debug("useSession.js: getUser has completed, loadingUser = false"),console.log(e.data())},U.collection(R).doc(t).onSnapshot(n,(function(e){throw new Error("Encountered error:",e)})))}catch(a){console.error(a.message),W()}}else f(!1),r(null),console.log("useSession.js: onChange, NO USER SESSION (LOGGED OUT). initializing = false");var t,n}),[]);Object(a.useEffect)((function(){var e,t=(e=g,z.onAuthStateChanged(e));return console.debug("useSession.js: useEffect -- subscribed to onAuthStateChanged"),function(){t()}}),[g]),Object(a.useEffect)((function(){return function(){return null!==h.current?h.current():null}}),[]);return{initializing:m,userSession:n,loadingUser:E,userDb:i,userSessionStatus:m?Z.ANON:n?i?Z.USER_READY:Z.USER_LOADING:Z.ANON}},le=n(159),se=Object.freeze({UPDATE_ACTIVE_SET:0,CLEAR_ACTIVE_SET:1}),ue={cookies:new le.a,activeSet:{setId:null,title:null}},de=Object(a.createContext)(ue),me=function(){return Object(a.useContext)(de)},fe=function(e,t){switch(t.type){case se.UPDATE_ACTIVE_SET:return Object(C.a)(Object(C.a)({},e),{},{activeSet:{setId:t.payload.setId,title:t.payload.title}});case se.CLEAR_ACTIVE_SET:return Object(C.a)(Object(C.a)({},e),{},{activeSet:{setId:null,title:null}});default:return e}},be=function(e){var t=e.children,n=Object(a.useReducer)(fe,ue),o=Object(s.a)(n,2),c=o[0],i=o[1];return r.a.createElement(de.Provider,{value:[c,i]},t)},pe=Object(f.a)({root:{flexGrow:1},appBarRoot:{background:"transparent",borderBottom:"2px solid black",boxShadow:"none"},logo:{minWidth:"0"},rightContent:{display:"flex",marginLeft:"auto"},doubleArrow:{fontSize:"small",color:"#ff5722"},usernameText:{color:"black",alignSelf:"center"}}),Ee=function(){var e=pe(),t=re().userSession,n=oe().userDb,o=me(),c=Object(s.a)(o,2),f=c[0],b=(c[1],Object(l.g)()),O=Object(l.f)(),w=Object(a.useState)(null),N=Object(s.a)(w,2),y=N[0],C=N[1],k=Boolean(y),T=function(e){C(null)};return r.a.createElement("div",{className:e.root},r.a.createElement(d.a,{className:e.appBarRoot,position:"static",elevation:1},r.a.createElement(v.a,null,r.a.createElement(u.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(m.a,{className:e.logo},r.a.createElement(p.a,{fontSize:"large"}))),r.a.createElement(E.a,{orientation:"vertical",variant:"middle",flexItem:!0}),r.a.createElement(i.b,{to:"/sets"},r.a.createElement(m.a,null,"SETS")),t&&null!=f.activeSet.setId&&null!=f.activeSet.title?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:e.doubleArrow}),r.a.createElement(i.b,{to:"".concat("/set","/").concat(f.activeSet.setId)},r.a.createElement(m.a,null,f.activeSet.title))):null,r.a.createElement(E.a,{orientation:"vertical",variant:"middle",flexItem:!0}),t?r.a.createElement("div",{className:e.rightContent},r.a.createElement(g.a,{onClick:function(e){C(e.currentTarget)},label:"test"},r.a.createElement(x.a,null)),n&&r.a.createElement(h.a,{variant:"body1",className:e.usernameText},n.username),r.a.createElement(S.a,{anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:k,onClose:T},r.a.createElement(I.a,{onClick:T},"Profile"),r.a.createElement(E.a,{orientation:"horizontal"}),r.a.createElement(I.a,{onClick:function(e){W(),T(),O.push("/goodbye")}},"Sign Out"))):"/signin"!==b.pathname&&r.a.createElement("div",{className:e.rightContent},r.a.createElement(i.b,{to:"/signin"},r.a.createElement(m.a,null,"Log in")))))))},ve=n(358),he=n(3),ge=n(353),Oe=n(362),je=n(307),we=Object(f.a)({root:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},relative:{position:"relative",transform:"translate(45%, 50%)",height:"50%"},smallGrey:{color:"grey"}}),xe=function(e){var t=e.type,n=e.relative,a=void 0!==n&&n,o=e.delay,c=void 0===o||o,i=we(),l=Object(he.a)(Object(k.a)({},i.relative,a),Object(k.a)({},i.root,!a)),s=Object(he.a)(Object(k.a)({},i.smallGrey,"smallGrey"===t)),u="smallGrey"===t?40:50;return r.a.createElement(je.a,{in:!0,unmountOnExit:!0,style:{transitionDelay:c?"300ms":"0ms"}},r.a.createElement(Oe.a,{className:l},r.a.createElement(ge.a,{color:"primary",size:u,className:s,disableShrink:!0,thickness:4})))},Se=Object(f.a)({root:{display:"flex",justifyContent:"center",paddingTop:"30px"}}),Ie=function(){var e=Se();"".concat("/note","/cbNW3nAieisZyUuXF8pN");return r.a.createElement(v.a,{className:e.root},r.a.createElement(h.a,{variant:"h4"},"Welcome"))},Ne=Object.freeze({CARD_ADDED:"cardAdded",UPDATE_NOTE_ON_CLIENT:"updateNoteOnClient",NOTE_SAVED:"noteSaved"}),ye={setId:null,userId:null,noteId:null,noteOnClient:"",noteIsSynced:!0,lastSaved:null,noteSavedCallback:function(e){return e},cardAddedCallback:function(e){return e}},Ce=Object(a.createContext)(ye),ke=function(){return Object(a.useContext)(Ce)},Te=function(e){var t=e.children,n=e.initialState,o=void 0===n?Object(C.a)({},ye):n,c=Object(a.useReducer)(Ae,o),i=Object(s.a)(c,2),l=i[0],u=i[1];return r.a.createElement(Ce.Provider,{value:[l,u]},t)},Ae=function(e,t){switch(t.type){case Ne.CARD_ADDED:return e.cardAddedCallback(),e;case Ne.UPDATE_NOTE_ON_CLIENT:return Object(C.a)(Object(C.a)({},e),{},{noteOnClient:t.payload,noteIsSynced:!1});case Ne.NOTE_SAVED:return e.noteSavedCallback(),Object(C.a)(Object(C.a)({},e),{},{noteIsSynced:!0,lastSaved:t.payload});default:return e}},De=n(148),_e=n.n(De),Re=function(e){return r.a.createElement(v.a,null,r.a.createElement(h.a,{variant:"body1"},"This is an information box on how to use the tools"))},Ve=n(109),Le=n(88),Fe=n.n(Le),Pe=Object(f.a)({root:{border:0,borderRadius:3,boxShadow:"0 1px 2px 1px rgba(2, 2, 2, 0.1)",color:"white",background:"#ff5722",height:48,padding:"0 20px","&:hover":{background:"#ffaa90"}},disabled:{background:"#fbfbfb",color:"rgb(185, 177, 177)"}});function Ue(e){var t=Pe();return r.a.createElement(m.a,{className:t.root,startIcon:r.a.createElement(Fe.a,null),disabled:!e.isEnabled,onClick:e.onClick,classes:{disabled:t.disabled}},"Save")}var ze=n(146),We=n.n(ze),Be=Object(f.a)({root:{border:0,borderRadius:3,boxShadow:"0 1px 2px 1px rgba(2, 2, 2, 0.1)",color:"#03a9f4",background:"white",height:48,padding:"0 20px"},disabled:{background:"#fbfbfb",color:"rgb(185, 177, 177)"}});function Ge(e){var t=Be();return r.a.createElement(m.a,{className:t.root,startIcon:r.a.createElement(We.a,null),disabled:!e.isEnabled,onClick:e.onClick,classes:{disabled:t.disabled}},"Flip")}var Me=n(356),Ke=n(357),Ye=n(161),He=n(361),$e=n(355),qe=n(147),Qe=n.n(qe),Je=n(354),Xe=Object(f.a)({definitionInput:{},termInput:{},isActive:{background:"rgba(225, 245, 254, 0.3)",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},outlinedInput:{padding:"10px 3px 10px 3px",borderRadius:"2px","&$focused $notchedOutlineActive":{border:"1px solid rgba(15, 15, 15, 0.6)",borderBottom:"2px solid rgba(137, 137, 137, 0.7)"}},notchedOutlineActive:{borderBottom:"2px solid rgba(137, 137, 137, 0.7)",boxShadow:"0 3px 5px 2px rgba(2, 2, 2, 0.1)"},notchedOutlineInactive:{border:"1px solid rgba(15, 15, 15, 0.6)",boxShadow:"0 3px 5px 2px rgba(2, 2, 2, 0.1)"},formLabelRoot:{"&$focused":{color:"#1C1C1C",fontWeight:"bold"}},focused:{},inputAdornmentRoot:{transform:"translate(-18px, -65px)"}});function Ze(e){var t,n=e.onClearInput,a=void 0===n?function(e){return e}:n,o=e.onFocus,c=void 0===o?function(e){return e}:o,i=e.onChange,l=void 0===i?function(e){return e}:i,s=e.inputIsEmpty,u=void 0===s||s,d=Object(Ye.a)(e,["onClearInput","onFocus","onChange","inputIsEmpty"]),m=Xe(),f="term"===d.name,b=d.isactive,p=d.value,E=d.name,v=d.label,h=Object(he.a)((t={},Object(k.a)(t,m.definitionInput,!f),Object(k.a)(t,m.termInput,f),t),Object(k.a)({},m.isActive,b));return r.a.createElement(Je.a,{fullWidth:!0},r.a.createElement(He.a,{name:E,label:v,className:h,multiline:!0,rows:6,rowsMax:6,variant:"outlined",inputProps:{style:{textAlign:"center",padding:"20px 10px 10px 10px",marginRight:"-45px"}},InputLabelProps:{shrink:!0,classes:{root:m.formLabelRoot,focused:m.focused}},fullWidth:!0,InputProps:{classes:{root:m.outlinedInput,notchedOutline:b?m.notchedOutlineActive:m.notchedOutlineInactive,focused:m.focused},endAdornment:r.a.createElement($e.a,{position:"end",className:m.inputAdornmentRoot},r.a.createElement(g.a,{"aria-label":"clear contents",onClick:a,onMouseDown:function(e){return e.preventDefault()},edge:"end"},u?null:r.a.createElement(Qe.a,null)))},onFocus:c,onChange:l,value:p,overflow:"hidden"}))}var et=function(e){var t=e.currentTextSelected,n=e.onWorkspaceSaveCard,o=void 0===n?function(e){return e}:n,c=Object(a.useState)(""),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(""),m=Object(s.a)(d,2),f=m[0],b=m[1],p=Object(a.useState)(null),E=Object(s.a)(p,2),v=E[0],h=E[1],g=Object(a.useState)(!1),O=Object(s.a)(g,2),j=O[0],w=O[1],x=Object(a.useRef)(t);Object(a.useEffect)((function(){if(null!==v&&null!==t&&""!==t.trim()&&t!==x)switch(v){case"term":u(t);break;case"definition":b(t)}}),[t]);var S=function(e,n){if(null===v&&null!=t){var a=function(e){return""===e.trim()?t:e+"\n"+t};"term"===e?u(n?function(e){return a(e)}:t):"definition"===e&&b(n?function(e){return a(e)}:t)}};Object(Ve.a)("q",(function(){return S("term",!0)}),[t]),Object(Ve.a)("w",(function(){return S("definition",!0)}),[t]),Object(a.useEffect)((function(){if(null!=l&&null!=f){var e=""===l.trim()||""===f.trim();w(!e)}}),[l,f]);var I=function(e){h(e.target.name)},N=function(e){var t=e.target.name;"term"===t?u(e.target.value):"definition"===t&&b(e.target.value)};return r.a.createElement(Me.a,{container:!0,spacing:2,justify:"space-evenly"},r.a.createElement(Ke.a,{onClickAway:function(){null!==t&&""!==t||h(null)}},r.a.createElement(Me.a,{container:!0,item:!0,spacing:2},r.a.createElement(Me.a,{item:!0,xs:12},r.a.createElement(Ze,{isactive:"term"===v,name:"term",label:"Term",onFocus:function(e){return I(e)},onChange:function(e){return N(e)},value:l,onClearInput:function(){u("")},inputIsEmpty:""===l})),r.a.createElement(Me.a,{item:!0,xs:!0},r.a.createElement(Ze,{isactive:"definition"===v,name:"definition",label:"Definition",onFocus:function(e){return I(e)},onChange:function(e){return N(e)},value:f,onClearInput:function(){b("")},inputIsEmpty:""===f})))),r.a.createElement(Me.a,{item:!0,container:!0,xs:12,justify:"center",spacing:2},r.a.createElement(Me.a,{item:!0},r.a.createElement(Ue,{isEnabled:j,onClick:function(){o({side_one:l,side_two:f},(function(e){e&&(u(""),b(""))}))}})),r.a.createElement(Me.a,{item:!0},r.a.createElement(Ge,{isEnabled:""!==l.trim()||""!==f.trim(),onClick:function(){var e=l;u(f),b(e)}}))))},tt=Object.freeze({INFO_WORKSPACE:"infoWorkspace",DEFINITION_WORKSPACE:"definitionWorkspace",FILLBLANK_WORKSPACE:"fillBlankWorkspace"}),nt=function(e){var t=e.currentTextSelected,n=e.currentWorkspace,o=void 0===n?tt.INFO_WORKSPACE:n,c=ke(),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(!1),m=Object(s.a)(d,2),f=m[0],b=m[1],p=function(e,t){b(!0),Q(l.userId,l.setId,e).then((function(e){u({type:Ne.CARD_ADDED}),"function"===typeof t&&t(e),b(!1)})).catch((function(e){console.error("Workspace.js: Failed to add new Card: ".concat(e.message)),b(!1)}))};return r.a.createElement(Oe.a,{id:"workspace"},f?r.a.createElement(xe,{type:"smallGrey",relative:!0,delay:!1}):function(e){switch(e){case tt.DEFINITION_WORKSPACE:return r.a.createElement(et,{currentTextSelected:t,onWorkspaceSaveCard:p});case tt.INFO_WORKSPACE:return r.a.createElement(Re,null);default:return null}}(o))},at=Object(f.a)({rootToolbar:{justifyContent:"flex-start",marginBottom:"30px",borderBottom:"1px dashed #aaa",minHeight:"auto",padding:"5px 0px"},buttonTool:{background:"#e6e6e6",marginRight:"3px",padding:"3px 6px",borderRadius:"3px"},buttonInfo:{padding:"3px 6px"},buttonSelected:{background:"#ff5722",color:"white","&:hover":{background:"#ffaa90"}}}),rt=function(e){var t=e.currentTextSelected,n=Object(a.useState)(tt.DEFINITION_WORKSPACE),o=Object(s.a)(n,2),c=o[0],i=o[1],l=ke(),d=Object(s.a)(l,2),f=(d[0],d[1],function(e){c===e.currentTarget.name?i(null):i(e.currentTarget.name),e.preventDefault()}),b=at();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:b.rootToolbar,disableGutters:!0},r.a.createElement(m.a,{name:tt.DEFINITION_WORKSPACE,onClick:f,className:Object(he.a)(b.buttonTool,Object(k.a)({},b.buttonSelected,c===tt.DEFINITION_WORKSPACE))},"Definition"),r.a.createElement(m.a,{className:Object(he.a)(b.buttonTool,Object(k.a)({},b.buttonSelected,c===tt.FILLBLANK_WORKSPACE))},"Fill blank"),r.a.createElement(m.a,{name:tt.INFO_WORKSPACE,onClick:f,className:Object(he.a)(b.buttonInfo,Object(k.a)({},b.buttonSelected,c===tt.INFO_WORKSPACE))},r.a.createElement(_e.a,null))),r.a.createElement(nt,{currentTextSelected:t,currentWorkspace:c}))},ot=n(365),ct=Object(f.a)({drawer:{flexShrink:0},drawerPaper:{top:"15vh",width:450,padding:"0 15px 0 2px",borderLeft:"none"},toolDrawerContainer:{borderTop:"1px solid #f2f2f2"}}),it=function(e){var t=e.open,n=e.children,a=ct();return r.a.createElement(ot.a,{className:a.drawer,classes:{paper:a.drawerPaper},variant:"persistent",anchor:"right",open:t},r.a.createElement("div",{className:a.toolDrawerContainer},n))},lt=n(364),st=n(108),ut=n.n(st),dt=(n(300),n(301),n(150)),mt=n.n(dt),ft=n(363),bt=function(e){var t=e.date,n=Object(a.useState)({date:"",time:""}),o=Object(s.a)(n,2),c=o[0],i=o[1];return Object(a.useEffect)((function(){var e=t.toLocaleString().split(","),n=Object(s.a)(e,2),a=n[0],r=n[1].trim().split(" "),o=Object(s.a)(r,2),c=o[0],l=o[1],u=c.substring(0,c.length-3);i({date:a,time:"".concat(u," ").concat(l)})}),[t]),r.a.createElement("span",{style:{fontVariant:"proportional-nums",fontStyle:"italic"}},r.a.createElement(h.a,{variant:"subtitle2"},"Last saved: ",c.date," at ",c.time))},pt=Object(f.a)({syncStatus:{display:"flex",padding:"4px 0"},cloudIcon:{color:"#03a9f4",marginLeft:"5px"},saveIcon:{color:"#ff5722",marginLeft:"5px","&:hover":{color:"grey",cursor:"pointer"}},editorPaper:{borderTopLeftRadius:"0",borderTopRightRadius:"0"},editorPaperReadOnly:{borderRadius:"4px"}});st.Quill.import("ui/icons").background='<svg xmlns="http://www.w3.org/2000/svg" class="ql-customIcon" viewBox="0 0 544 512"><path d="M0 479.98L99.92 512l35.45-35.45-67.04-67.04L0 479.98zm124.61-240.01a36.592 36.592 0 0 0-10.79 38.1l13.05 42.83-50.93 50.94 96.23 96.23 50.86-50.86 42.74 13.08c13.73 4.2 28.65-.01 38.15-10.78l35.55-41.64-173.34-173.34-41.52 35.44zm403.31-160.7l-63.2-63.2c-20.49-20.49-53.38-21.52-75.12-2.35L190.55 183.68l169.77 169.78L530.27 154.4c19.18-21.74 18.15-54.63-2.35-75.13z"/></svg>';var Et=function(e){var t=e.initialValue,n=e.readOnly,o=void 0!==n&&n,c=pt(),i=Object(a.useState)(t||""),l=Object(s.a)(i,2),u=l[0],d=l[1],m=ke(),f=Object(s.a)(m,2),b=f[0],p=f[1];return r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement("div",{className:c.syncStatus},r.a.createElement(bt,{date:b.lastSaved.toDate()}),b.noteIsSynced?r.a.createElement(ft.a,{title:"Note is synced"},r.a.createElement(mt.a,{className:c.cloudIcon})):r.a.createElement(ft.a,{title:"Save note"},r.a.createElement(Fe.a,{className:c.saveIcon,onClick:function(){q(b.noteId,b.setId,{content:u}).then((function(e){console.debug("QuillEditor.js: Note successfully saved."),p({type:Ne.NOTE_SAVED,payload:e})})).catch((function(e){console.error("QuillEditor.js: Failed to save note: ".concat(e.message))}))}}))),r.a.createElement(ut.a,{theme:"snow",value:u,onChange:function(e,t,n,a){d(e),console.log(t),console.log(n),"user"===n&&p({type:Ne.UPDATE_NOTE_ON_CLIENT,payload:e})},readOnly:o,modules:{toolbar:!o&&[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["blockquote"],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},placeholder:""===u?"Start you new note...":""}))},vt=Object(f.a)({root:{display:"flex"},noteViewContainer:{flexGrow:1},noteViewContainerShifted:{marginRight:"450px"},toggleBtnGridRoot:{justifyContent:"center",width:"99%"},switchBase:{"&$switchChecked":{color:"#ff5722"},"&$switchChecked + $switchTrack":{backgroundColor:"#ff5722"}},switchTrack:{},switchChecked:{},noteTitle:{}}),ht=function(){var e=vt(),t=Object(l.h)().id,n=Object(a.useState)(),o=Object(s.a)(n,2),c=o[0],i=o[1],u=Object(a.useState)(null),d=Object(s.a)(u,2),m=d[0],f=d[1],b=Object(a.useState)(!c),p=Object(s.a)(b,2),E=p[0],g=p[1],O=Object(l.f)(),j=me(),w=Object(s.a)(j,2),x=w[0],S=w[1],I=Object(a.useRef)(x.activeSet),N=Object(a.useState)(!1),y=Object(s.a)(N,2),T=y[0],A=(y[1],Object(a.useState)(!1)),D=Object(s.a)(A,2),_=D[0],R=D[1];Object(a.useEffect)((function(){if(null==t||""===t.trim())return console.log("here"),void O.push("/");g(!0),G(t).then((function(e){if(!e.exists)throw new Error("No document found in 'notes' for noteId ".concat(t));i(Object(C.a)(Object(C.a)({},e.data()),{},{noteId:e.id})),I.current.setId!==e.data().setId&&(console.debug("ViewNote.js: using getSetForNoteId to identify set"),M(e.id).then((function(e){if(e.empty)throw new Error("couldn't find setId by querying 'set-notes' will noteId");if(e.size>1)throw new Error("located more than 1 document in 'set-notes' that claims this noteId");var t=e.docs[0];S({type:se.UPDATE_ACTIVE_SET,payload:{setId:t.id,title:t.data().setTitle}}),I.current={setId:t.id,title:t.data().setTitle}})).catch((function(e){console.error("ViewNote.js: Failed to update activeSet for userClientContext: ".concat(e.message))}))),g(!1)})).catch((function(e){console.error("ViewNote.js: Failed to retrieve doc from 'notes': ",e.message),g(!1)})),console.log("ViewNote/index: useEffect getNote()")}),[t,T,O,I,S]);var V=Object(a.useCallback)((function(){var e=document.getElementById("noteView"),t=window.getSelection();if(null!=t){var n=t.anchorNode;if(null!=n){var a=n.parentNode;if(e.contains(a)){var r=t.toString();f(""===r?null:r)}else f(null)}}}),[]);Object(a.useEffect)((function(){return document.addEventListener("mouseup",V),function(){return document.removeEventListener("mouseup",V)}}),[V]);Object(he.a)();return E?r.a.createElement(xe,{type:"smallGrey"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{className:e.toggleBtnGridRoot,container:!0,alignItems:"center",spacing:1},r.a.createElement(Me.a,{item:!0},r.a.createElement(h.a,null,"Edit Note")),r.a.createElement(Me.a,{item:!0},r.a.createElement(lt.a,{checked:_,onChange:function(){R(!_)},classes:{switchBase:e.switchBase,track:e.switchTrack,checked:e.switchChecked}})),r.a.createElement(Me.a,{item:!0},r.a.createElement(h.a,null,"Markup"))),null!=c?r.a.createElement("div",{className:e.root},r.a.createElement(Te,{initialState:{userId:c.userId,setId:c.setId,noteId:c.noteId,noteOnClient:c.content,noteIsSynced:!0,lastSaved:c.last_modified,noteSavedCallback:function(){},cardAddedCallback:function(){}}},r.a.createElement(v.a,{className:Object(he.a)(e.noteViewContainer,Object(k.a)({},e.noteViewContainerShifted,_))},r.a.createElement("div",{id:"noteView",className:e.noteView},r.a.createElement(h.a,{variant:"h5",className:e.noteTitle},c.title),r.a.createElement(Et,{initialValue:c.content,readOnly:_}))),r.a.createElement(it,{open:_},r.a.createElement(rt,{currentTextSelected:m})))):r.a.createElement(r.a.Fragment,null,"Could not find this note."))},gt=function(){return r.a.createElement(ht,null)},Ot=function(){var e={email:"",password:""},t=Object(a.useState)(Object(C.a)({},e)),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(null),u=Object(s.a)(i,2),d=u[0],m=u[1],f=Object(l.f)(),b=function(e){e.preventDefault(),c(Object(C.a)(Object(C.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))};return r.a.createElement(v.a,null,r.a.createElement(h.a,{variant:"h2"},"Sign In"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return z.signInWithEmailAndPassword(e,t)}(o.email,o.password).then((function(){c(Object(C.a)({},e)),m(null),f.push("/")})).catch((function(e){m(e)}))}},r.a.createElement("input",{name:"email",value:o.email,onChange:b,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:o.password,onChange:b,type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:!function(){return""!==o.email&&""!==o.password},type:"submit"},"Sign In"),d&&r.a.createElement("p",null,d.message)))},jt=Object(f.a)({root:{display:"flex",justifyContent:"center",paddingTop:"30px"}}),wt=function(){var e=jt();return r.a.createElement(v.a,{className:e.root},r.a.createElement(h.a,{variant:"h5"},"You have successfully been logged out."))},xt=function(e){var t=e.currentStatus,n=e.forStatus,o=e.children,c=Object(a.useState)(!1),i=Object(s.a)(c,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){u(t===n)}),[t,n]),r.a.createElement(r.a.Fragment,null,l&&o)},St=n(351),It=n(306),Nt=n(359),yt=n(89),Ct=n.n(yt),kt=n(360),Tt=n(151),At=n.n(Tt),Dt=function(e){var t=e.user,n=e.onPreAdd,o=void 0===n?function(e){return e}:n,c=e.onPostAdd,i=void 0===c?function(e){return e}:c,l=Object(a.useState)(""),u=Object(s.a)(l,2),d=u[0],m=u[1],f=function(e,t){K(e,t).then((function(e){i(e)})).catch((function(e){console.error("AddSet.js: Error adding new set: ",e.message)})),m("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),t){var n=d,a=t.uid;o(),f(a,{title:n})}}},r.a.createElement(Je.a,{error:!0},r.a.createElement(He.a,{label:"Add Set",value:d,onChange:function(e){m(e.target.value)},size:"small",InputProps:{endAdornment:r.a.createElement($e.a,{position:"end"},r.a.createElement(g.a,{type:"submit"},d.length>0&&r.a.createElement(At.a,null)))}}))))},_t=Object(f.a)({setViewRoot:{flexGrow:"1",minWidth:"350px",maxWidth:"800px",display:"flex",flexDirection:"column"},addSetFormDiv:{alignSelf:"flex-end",width:"325px",display:"flex",justifyContent:"flex-end"},noSetsDiv:{alignSelf:"center",padding:"30px 0"},setsListRoot:{},setsListItem:{borderLeft:"3px solid transparent","&:hover":{borderLeft:"3px solid rgb(43, 140, 236)"}}}),Rt=function(e){var t=e.sets,n=e.onRemoveSet,a=void 0===n?function(e,t){return t}:n,o=_t();return r.a.createElement(St.a,{className:o.setsListRoot},t.map((function(e){return r.a.createElement(It.a,{key:e.setId,divider:!0,component:i.b,to:"".concat("/set","/").concat(e.setId),classes:{container:o.setsListItem}},r.a.createElement(Nt.a,{primary:e.data.title,secondary:(t=e.data.created_on,new Date(1e3*t.seconds).toLocaleDateString())}),r.a.createElement(kt.a,null,r.a.createElement(g.a,{onClick:function(t){return a(t,e.setId)}},r.a.createElement(Ct.a,null))));var t})))},Vt=function(e){var t=e.user,n=_t(),o=Object(a.useRef)(null),c=Object(a.useState)(null),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(!1),m=Object(s.a)(d,2),f=m[0],b=m[1],p=Object(a.useState)(!l),E=Object(s.a)(p,2),v=E[0],h=E[1],g=me(),O=Object(s.a)(g,2),j=O[0],w=O[1];Object(a.useEffect)((function(){var e;null!=t&&(h(!0),(e=t.uid,U.collection(L).doc(e).get()).then((function(e){if(!e.exists)return console.debug("SetsView.js: getDocFromUserSets() did not return a document (i.e. this user has no sets, or this is an error!)"),void h(!1);o.current=e.data(),console.debug("SetsView.js: getDocFromUserSets (database), snapshot.data() = ",e.data());var t=x(e.data().sets);console.debug("SetsView.js: res = ",t),S(o.current)&&(u(t),h(!1))})).catch((function(e){console.error("SetsView.js: Couldn't get doc from user-sets: ",e.message)})))}),[t,f]);var x=function(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(s.a)(a[n],2),o=r[0],c=r[1];t.push({setId:o,data:c})}return t},S=function(e){return!0};return v?r.a.createElement("div",{className:n.setViewRoot},r.a.createElement(xe,{type:"smallGrey"})):r.a.createElement("div",{className:n.setViewRoot},r.a.createElement("div",{className:n.addSetFormDiv},r.a.createElement(Dt,{user:t,onPreAdd:function(){h(!0)},onPostAdd:function(e){e&&b(!f)}})),null!=l&&l.length>0?r.a.createElement(Rt,{sets:l,onRemoveSet:function(e,n){e.preventDefault(),null!=n&&(h(!0),Y(t.uid,n).then((function(){b(!f),j.activeSet.setId===n&&w({type:se.CLEAR_ACTIVE_SET})})).catch((function(e){console.error("SetsView.js: Couldn't remove set: ",e.message)})))}}):r.a.createElement("div",{className:n.noSetsDiv},"You have no sets. Add your first set!"))},Lt=n(152),Ft=n.n(Lt),Pt=Object(f.a)({needToLoginRoot:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"400px",height:"400px"},needToLoginLinks:{display:"flex",justifyContent:"space-evenly",width:"100%"}}),Ut=function(){var e=Pt();return r.a.createElement("div",{className:e.needToLoginRoot},r.a.createElement("div",null,r.a.createElement(h.a,{variant:"h4"},r.a.createElement(Ft.a,{fontSize:"large"}),"Sorry")),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"body1"},"You will need to login to view this content.")),r.a.createElement("div",{className:e.needToLoginLinks},r.a.createElement(i.b,null,"Login"),r.a.createElement(i.b,null,"Sign Up")))},zt=Object(f.a)({setsPageRoot:{display:"flex",justifyContent:"center",paddingTop:"30px"}}),Wt=function(){var e=zt(),t=oe().userDb,n=ce();return r.a.createElement("div",{className:e.setsPageRoot},r.a.createElement(xt,{currentStatus:n,forStatus:Z.ANON},r.a.createElement(Ut,null)),r.a.createElement(xt,{currentStatus:n,forStatus:Z.USER_LOADING}),r.a.createElement(xt,{currentStatus:n,forStatus:Z.USER_READY},r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{user:t}))))},Bt=n(349),Gt=n(154),Mt=n.n(Gt),Kt=n(153),Yt=n.n(Kt),Ht=Object(f.a)({textfieldRoot:{},checkIconButton:{padding:"3px"},checkIcon:{color:"green"}}),$t=function(e){var t=e.user,n=e.setId,o=e.onNewNoteAdded,c=void 0===o?function(e){return e}:o,i=Ht(),l=Object(a.useState)(""),u=Object(s.a)(l,2),d=u[0],m=u[1],f=function(e,t,n){H(e,t,n).then((function(e){c(e)})).catch((function(e){console.error("AddNote.js: Error adding new note: ",e.message)})),m("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{error:!0},r.a.createElement(He.a,{variant:"outlined",value:d,placeholder:"Title",onChange:function(e){m(e.target.value)},size:"small",className:i.textfieldRoot,InputProps:{endAdornment:r.a.createElement($e.a,{position:"end"},r.a.createElement(g.a,{onClick:function(e){if(e.preventDefault(),t&&n){var a=d,r=t.uid;f(r,n,{title:a})}},className:i.checkIconButton},d.length>0&&r.a.createElement(Yt.a,{className:i.checkIcon})))}})))},qt=Object(f.a)({notesListRoot:{width:"400px"},notesViewToolbar:{justifyContent:"space-between",minHeight:"36px",marginBottom:"36px"},notesListItemNote:{border:"1px solid #e8dbdb",borderLeft:"5px solid #03a9f4",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px",marginBottom:"0.5em","&:hover":{borderLeft:"6px solid #0288d1"}},notesListLink:{textDecoration:"none",color:"#1a3743"},notesListItemPrimaryText:{lineHeight:"1.2em"},notesListItemAddNote:{marginBottom:"1em",paddingRight:"0",justifyContent:"flex-end"},notesListItemSecondaryActionRemoveNote:{right:"0px"}}),Qt=function(e){var t=e.setId,n=e.user,o=qt(),c=Object(a.useState)(null),l=Object(s.a)(c,2),d=l[0],f=l[1],b=Object(a.useState)(null),p=Object(s.a)(b,2),E=p[0],v=p[1],O=Object(a.useState)(!E),j=Object(s.a)(O,2),w=j[0],x=j[1],S=Object(a.useState)(!1),I=Object(s.a)(S,2),N=I[0],y=I[1],C=me(),k=Object(s.a)(C,2),T=(k[0],k[1]),A=Object(a.useState)(null),D=Object(s.a)(A,2),_=D[0],R=D[1];Object(a.useEffect)((function(){null!=t&&""!==t.trim()&&(x(!0),function(e){return U.collection(F).doc(e).get()}(t).then((function(e){if(!e.exists)throw new Error("No document found in 'set-notes' for setId ".concat(t));if(f({title:e.data().setTitle,notes_count:e.data().notes_count,max_notes:e.data().max_notes||5}),!("notes"in e.data()))throw new Error("Data model error, there is no 'notes' object in this document!");var n=[];Object.keys(e.data().notes).length>0?(n=V(e.data().notes))&&n.length>0&&v(n):v(null),T({type:se.UPDATE_ACTIVE_SET,payload:{setId:e.id,title:e.data().setTitle}}),x(!1)})).catch((function(e){console.error("NotesList.js: Failed to retrieve doc from 'set-notes': ",e.message),x(!1)})))}),[t,N]);var V=function(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(s.a)(a[n],2),o=r[0],c=r[1];t.push({noteId:o,data:c})}return t},L=function(e){e&&(y(!N),z())},P=function(e){R(e.currentTarget)},z=function(){R(null)},W=Boolean(_);return w?r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{type:"smallGrey",relative:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:o.notesViewToolbar},r.a.createElement("div",null,r.a.createElement(h.a,{variant:"subtitle2"},d.notes_count," ","note".concat(d.notes_count>1?"s":""))),r.a.createElement("div",null,r.a.createElement(ft.a,{title:"Add Note"},r.a.createElement(m.a,{onClick:P},r.a.createElement(Mt.a,null))),r.a.createElement(Bt.a,{open:W,onClose:z,anchorEl:_,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement($t,{user:n,setId:t,onNewNoteAdded:L})))),r.a.createElement(St.a,{className:o.notesListRoot},null!==E&&r.a.createElement(r.a.Fragment,null,E.map((function(e){return r.a.createElement(It.a,{key:e.noteId,classes:{container:o.notesListItemNote}},r.a.createElement(i.b,{to:"".concat("/note","/").concat(e.noteId),className:o.notesListLink},r.a.createElement(Nt.a,{primary:e.data.title,primaryTypographyProps:{className:o.notesListItemPrimaryText}})),r.a.createElement(kt.a,{className:o.notesListItemSecondaryActionRemoveNote},r.a.createElement(ft.a,{title:"Delete"},r.a.createElement(g.a,{onClick:function(n){return function(e,n){null!=n&&null!=t||console.error("NotesView.js: Cannot remove note, either invalid noteId or setId");try{$(n,t).then((function(e){e&&y(!N)}))}catch(a){console.error("NotesView.js Cannot remove note: ",a.message)}}(0,e.noteId)}},r.a.createElement(Ct.a,null)))))})))))},Jt=n(158),Xt=n.n(Jt),Zt=n(157),en=n.n(Zt),tn=n(163),nn=n(155),an=n.n(nn),rn=n(156),on=n.n(rn),cn=Object(f.a)({gridContainerRoot:{},gridItemSide:{},paperSide:{padding:"6px 8px",minHeight:"100px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"},gridItemActions:{justifyContent:"center"}}),ln=function(e){var t=e.card,n=e.onDeleteCard,a=void 0===n?function(e){return e}:n,o=cn();return r.a.createElement(Me.a,{container:!0,className:o.gridContainerRoot,spacing:1},r.a.createElement(Me.a,{item:!0,className:o.gridItemSide,sm:5,xs:12},r.a.createElement(tn.a,{className:o.paperSide,elevation:2},r.a.createElement(h.a,{variant:"h6"},t.side_one))),r.a.createElement(Me.a,{item:!0,className:o.gridItemSide,sm:!0,xs:!0},r.a.createElement(tn.a,{className:o.paperSide,elevation:2},r.a.createElement(h.a,{variant:"body1"},t.side_two))),r.a.createElement(Me.a,{item:!0,className:o.gridItemActions,sm:1,xs:12},r.a.createElement(g.a,null,r.a.createElement(an.a,null)),r.a.createElement(g.a,{onClick:function(){a(t.cardId)}},r.a.createElement(on.a,null))))},sn=Object(f.a)({deckViewToolbar:{justifyContent:"space-between",minHeight:"36px",marginBottom:"36px"},listItemCardView:{padding:"0px 2px",marginBottom:"20px",whiteSpace:"pre-wrap"},listItemCompactView:{whiteSpace:"pre-wrap"}}),un=function(e){var t=e.setId,n=sn(),o=Object(a.useState)(null),c=Object(s.a)(o,2),i=c[0],l=c[1],d=Object(a.useState)(null),f=Object(s.a)(d,2),b=f[0],p=f[1],E=Object(a.useState)(!b),v=Object(s.a)(E,2),g=v[0],O=v[1],j=Object(a.useState)(!1),w=Object(s.a)(j,2),x=w[0],S=w[1],I=Object(a.useState)(!0),N=Object(s.a)(I,2),y=N[0],k=N[1];Object(a.useEffect)((function(){null!=t&&""!==t.trim()&&(O(!0),function(e){return U.collection(P).doc(e).get()}(t).then((function(e){if(!e.exists)throw new Error("No document found in 'set-cards' for setId ".concat(t));if(l({setTitle:e.data().setTitle,cards_count:e.data().cards_count,last_modified:e.data().last_modified}),!("cards"in e.data()))throw new Error("Data model error, there is no 'cards' object in this document!");var n=[];Object.keys(e.data().cards).length>0?(n=T(e.data().cards))&&n.length>0&&p(n):p(null),O(!1)})).catch((function(e){console.error("DeckView.js: Failed to retrive doc from 'set-cards': ",e.message),O(!1)})))}),[t,x]);var T=function(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var r=Object(s.a)(a[n],2),o=r[0],c=r[1];t.push({cardId:o,data:c})}return t},A=function(e){try{if(null==e||""===e.trim())return void console.error("DeckView.js: Cannot perform onDeleteCard because cardId is null/empty");J(e,t).then((function(e){S(!x)}))}catch(n){console.error("DeckView.js: Could not remove card: ".concat(n.message))}},D=function(){return r.a.createElement(u.a,{className:n.deckViewToolbar},r.a.createElement("div",null,r.a.createElement(h.a,{variant:"subtitle2"},i.cards_count," ","card".concat(i.cards_count>1?"s":""))),r.a.createElement("div",null,r.a.createElement(ft.a,{title:y?"Switch to Card View":"Switch to Compact View"},r.a.createElement(m.a,{onClick:function(){k(!y)}},y?r.a.createElement(en.a,{alt:"test"}):r.a.createElement(Xt.a,null)))))};return g?r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{type:"smallGrey",relative:!0})):null==b?r.a.createElement(r.a.Fragment,null):y?r.a.createElement(r.a.Fragment,null,D(),r.a.createElement(St.a,null,b.map((function(e){return r.a.createElement(It.a,{key:e.cardId,className:n.listItemCompactView},r.a.createElement(Me.a,{container:!0},r.a.createElement(Me.a,{item:!0,xs:6},e.data.side_one),r.a.createElement(Me.a,{item:!0,xs:!0},e.data.side_two)))})))):r.a.createElement(r.a.Fragment,null,D(),r.a.createElement(St.a,null,b.map((function(e){return r.a.createElement(It.a,{key:e.cardId,className:n.listItemCardView},r.a.createElement(ln,{card:Object(C.a)({cardId:e.cardId},e.data),onDeleteCard:A}))}))))},dn=Object(f.a)({root:{paddingTop:"30px"},gridContainerRoot:{justifyContent:"center"},gridItemNotesView:{},gridItemDeckView:{},sectionHeading:{fontVariantCaps:"all-small-caps",borderBottom:"3px solid black"}}),mn=function(){var e=dn(),t=oe().userDb,n=ce(),a=Object(l.h)().id,o=me(),c=Object(s.a)(o,2),i=c[0];c[1];return r.a.createElement(v.a,null,r.a.createElement(xt,{currentStatus:n,forStatus:Z.ANON},"Need to log in"),r.a.createElement(xt,{currentStatus:n,forStatus:Z.USER_LOADING}),r.a.createElement(xt,{currentStatus:n,forStatus:Z.USER_READY},r.a.createElement("div",{className:e.root},r.a.createElement(h.a,{variant:"h4"},i.activeSet&&i.activeSet.title),r.a.createElement("br",null),r.a.createElement(Me.a,{container:!0,className:e.gridContainerRoot,spacing:2},r.a.createElement(Me.a,{item:!0,className:e.gridItemNotesView,lg:4,xs:12},r.a.createElement(h.a,{variant:"h5",className:e.sectionHeading},"Notes"),r.a.createElement(Qt,{setId:a,user:t})),r.a.createElement(Me.a,{item:!0,className:e.gridItemDeckView,lg:!0,xs:!0},r.a.createElement(h.a,{variant:"h5",className:e.sectionHeading},"Deck"),r.a.createElement(un,{setId:a}))))))},fn=Object(f.a)({root:{paddingTop:"30px",paddingBottom:"200px"},backdrop:{backgroundColor:"rgba(232, 232, 232, 0.2)"}}),bn=function(){var e=fn(),t="".concat("/note","/:id"),n="".concat("/set","/:id"),a=ie(),o=a.initializing,c=a.userSession,s=a.loadingUser,u=a.userDb,d=a.userSessionStatus,m={initializing:o,userSession:c},f={loadingUser:s,userDb:u};return o?r.a.createElement(ve.a,{open:o,className:e.backdrop},r.a.createElement(xe,null)):r.a.createElement(i.a,null,r.a.createElement(ae,{userSessionValue:m,userDbValue:f,userSessionStatusValue:d},r.a.createElement(be,null,r.a.createElement(Ee,null),r.a.createElement("div",{className:e.root},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:Ie}),r.a.createElement(l.a,{path:"/sets",component:Wt}),r.a.createElement(l.a,{path:n,component:mn}),r.a.createElement(l.a,{path:t,component:gt}),r.a.createElement(l.a,{path:"/note",component:gt}),r.a.createElement(l.a,{path:"/signin",component:Ot}),r.a.createElement(l.a,{path:"/goodbye",component:wt}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(302);c.a.render(r.a.createElement(y.Provider,{value:U},r.a.createElement(bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.c164c82e.chunk.js.map